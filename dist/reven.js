Element.prototype.attribSet=function(t,e){if("string"==typeof t){const n=this.___a[t];n?n.v=n.s(e,n.v):this.setAttribute(t,e)}else for(let n in t){const r=this.___a[n];r?r.v=r.s(t[n],r.v):this.setAttribute(t[n],e)}},Element.prototype.attribGet=function(t){if("string"==typeof t){const e=this.___a[t];return e?e.v:this.getAttribute(t)}{let e={};t=t||this.___a;for(let n in t){const t=this.___a[n];e[n]=t?t.v:this.getAttribute(n)}return e}};const forEachElement=(t,e,n=document)=>{"string"==typeof t?t=n.getElementsByTagName(t):t.query&&(t=n.querySelectorAll(t.query));for(let n=0;n<t.length;n++)e(t[n],n)};function createElement(t,e){const n=document.createElement(t);return e&&n.attribSet(e),n}function getArrowFunctionBody(t){"string"!=typeof t&&(t=t.toString());const e=t.indexOf("{"),n=t.lastIndexOf("}");if(e<0||n<0||"()=>"!==t.substring(0,e).replace(/[\n\r\t\s]/g,""))throw new Error(`Improper function, should be only arrow function like that: () => { ... body ... }, yours:\n${t}`);return t.substring(e+1,n)}function createHTMLElementClassString({returns:t,className:e="ThisClass",inherit:n="HTMLElement",attributes:r,lifecycle:i,elements:o,template:s,methods:a,listen:l,emits:c,storage:m}){let g="";if(t&&(g+="return "),n?("string"!=typeof n&&(n=n.name),g+=`class ${e} extends ${n}{`):g+=`class ${e}{`,r&&(r=Object.entries(r)).length&&(g+=`static get observedAttributes(){return ${JSON.stringify(r.map(([t])=>t))}};`,g+="attributeChangedCallback(n,ov,nv){const a=this.___a[n];if(!a.is)nv=JSON.parse(nv);a.v=a.s(nv,a.v)};"),s=s?`document.getElementById(${JSON.stringify(s)})`:"template",g+="constructor(){super();",m?g+="this.style.display='none';":(g+=`const shadow=this.attachShadow({mode:'open'}),clon=${s}.content.cloneNode(true);shadow.appendChild(clon);`,o&&o.length&&(g+=`const ${o.map(t=>`${t}=shadow.getElementById(${JSON.stringify(t)})`).join(",")};`)),c&&(c=Object.entries(c)).length&&(g+=`const emit={${c.map(([t,e])=>`${t}:()=>this.dispatchEvent(new Event(${JSON.stringify(t)},${!0===e?"{bubbles:true,composed:true}":JSON.stringify(e)}))`).join(",")}};`),a&&(a=Object.entries(a)).length&&(g+=`const ${a.map(([t,e])=>`${t}=${e.toString()}`).join(",")};`),i&&i.init&&(g+=`\n${getArrowFunctionBody(i.init)};`),l&&l.length){let t;g+=l.map(e=>{let n,r,i=[];if(e.forEach(t=>{"string"==typeof t?n=t:"function"==typeof t?n=t.toString():"boolean"==typeof t?r=t:t instanceof Array?r=t[0]?JSON.stringify(t[0]):void 0:Object.entries(t).forEach(([t,e])=>{e instanceof Array?e.forEach(e=>i.push({element:t,event:e})):i.push({element:t,event:e})})}),1===i.length){const t=i[0];return`${t.element}.addEventListener(${JSON.stringify(t.event)},${n}${void 0!==r?`,${r}`:""});`}if(i.length>1)return(t?"":(t=!0,"let "))+`____tmp=${n};`+i.map(t=>`${t.element}.addEventListener(${JSON.stringify(t.event)},____tmp${void 0!==r?`,${r}`:""});`).join("")}).join("")}return i&&(i.append&&(g+=`this.__la=${i.append.toString()};`),i.remove&&(g+=`this.__lr=${i.remove.toString()};`),i.move&&(g+=`this.__lm=${i.move.toString()};`)),r&&r.length&&(g+=`this.___a={${r.map(([t,e])=>{const n=!(e instanceof Array);n||(e=e[0]);let r=`${JSON.stringify(t)}:`;return e.init&&(r+=`(()=>{${getArrowFunctionBody(e.init)};return `),(r+="function"==typeof e?`{g:v=>v,s:${e.toString()}${n?",is:1":""}}`:`{${[e.get?`g:${e.get.toString()},`:"g:v=>v",e.set?`s:${e.set.toString()},`:"s:()=>{}",n?"is:1":""].filter(t=>t).join[","]}}`)+(e.init?"})()":"")}).join(",")}};`),g+="};",i&&(i.append&&(g+="connectedCallback(){this.__la()};"),i.remove&&(g+="disconnectedCallback(){this.__lr()};"),i.move&&(g+="adoptedCallback(){this.__lm()};")),g+="};"}function reven(t,e){forEachElement("template",t=>{const e=t.getAttribute("id"),n=(new DOMParser).parseFromString(t.innerHTML,"text/html"),r=[];let i;forEachElement({query:"[id]"},t=>{r.push(t.getAttribute("id"))},n),forEachElement("script",t=>{if(i)throw new Error("Can not declare more than one component in a template");try{new Function("component",t.innerText)(t=>i=t)}catch(t){console.error(`ERROR in component ${e}: ${t.message}`)}t.parentNode.removeChild(t)},n),i||(i={}),t.innerHTML=n.body.innerHTML,i.elements=r,i.returns=!0;const o=new Function("template",createHTMLElementClassString(i))(t);customElements.define(e,o)}),document.body.appendChild(createElement(t,e))}